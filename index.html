<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spain Space SWGoH</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/dynamic-loader.js" defer></script>
    <link rel="icon" href="https://assets.swgoh.gg/files/ui/tex.guild_icon_oldrepublic_tint.00b15b7f62455726b72d.webp" type="image/x-icon">
</head>
<body>

<header id="index-dynamic-header">
    <!-- Si falla la carga, este mensaje será visible -->
    <p>Cargando la cabecera...</p>
</header>

<main>
    <section id="reglas">
        <h2>Reglas del Gremio</h2>
        <p>Gremio de buen rollo, gente activa en eventos, 6M PG, 2 Leyendas, leer chat y saludar al unirse</p>
        <ol class="resource-list">
            <li class="priority-item">Buen rollo</li>
            <li class="priority-item">Saludar al unirse al gremio</li>
            <li class="priority-item">Leer el chat</li>
            <li class="priority-item">Ser activa en eventos</li>
            <li class="priority-item">Padawans: 900k en Raid</li>
            <li class="priority-item">Resto: 3M en Raid</li>
        </ol>
    </section>

    <section id="guild‑goals">
        <h2>Prioridades del Gremio</h2>
        <div class="legend">
            <div class="legend-item"><div class="legend-color complete"></div> Completaron</div>
            <div class="legend-item"><div class="legend-color failed"></div> Fallaron</div>
            <div class="legend-item"><div class="legend-color not-played"></div> No jugaron</div>
            <div class="legend-item"><div class="legend-color not-eligible"></div> NO cumplen requisitos</div>
            <div class="legend-item"><div class="legend-color target-box"></div> Necesarias para cumplir objetivo</div>
        </div>
        <ol class="resource-list">
            <li class="priority-item">
                <div class="priority-metric"><a href="orden66.html">Orden 66</a></div>
                <div class="priority-target">Caja 8 (148M)</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="85" max="148"></progress>
                        <span class="progress-label">85 / 148</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric"><a href="alzamiento.html">Alzamiento</a></div>
                <div class="priority-target">Zeffo</div>
                <div class="priority-progress grid-priority-progress" data-completed="3" data-attempted="11" data-eligible="14" data-target="30" data-total="50"></div>
            </li>
            <li class="priority-item">
                <div class="priority-metric"><a href="alzamiento.html">Alzamiento</a></div>
                <div class="priority-target">Mandalor</div>
                <div class="priority-progress grid-priority-progress" data-completed="12" data-attempted="13" data-eligible="14" data-target="25" data-total="50"></div>
            </li>
        </ol>
    </section>

    <section id="guild‑warnings">
        <h2>Tarjetas amarillas</h2>
        <ol class="resource-list">
            <li class="priority-item">
                <div class="priority-metric">DarkNando97</div>
                <div class="priority-target">Saludar al entrar</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="0" max="1"></progress>
                        <span class="progress-label">0 / 1</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">wSS DE</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="410" max="900"></progress>
                        <span class="progress-label">410k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">PaulSkywalker95</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="410" max="900"></progress>
                        <span class="progress-label">410k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Varon John Eden</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="550" max="900"></progress>
                        <span class="progress-label">550k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Cerilio</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="630" max="900"></progress>
                        <span class="progress-label">630k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">VIRUS</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="575" max="900"></progress>
                        <span class="progress-label">575k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Hill</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="615" max="900"></progress>
                        <span class="progress-label">615k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Lucas Escaivazquez</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="750" max="900"></progress>
                        <span class="progress-label">750k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Dark Iskender</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="826" max="900"></progress>
                        <span class="progress-label">826k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Dark imdroc</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="845" max="900"></progress>
                        <span class="progress-label">845k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Kairas</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="848" max="900"></progress>
                        <span class="progress-label">848k / 900k</span>
                    </div>
                </div>
            </li>
            <li class="priority-item">
                <div class="priority-metric">Bald Dart</div>
                <div class="priority-target">Orden66</div>
                <div class="priority-progress">
                    <div class="progress-wrapper">
                        <progress class="progress-bar" value="895" max="900"></progress>
                        <span class="progress-label">895k / 900k</span>
                    </div>
                </div>
            </li>
        </ol>
    </section>
</main>

<footer id="index-dynamic-footer">
    <!-- Si falla la carga, este mensaje será visible -->
    <p>Cargando el pie...</p>
</footer>

<script>
  document.querySelectorAll('.grid-priority-progress').forEach(progress => {
    const completed = parseInt(progress.dataset.completed) || 0;
    const attempted = parseInt(progress.dataset.attempted) || 0;
    const eligible = parseInt(progress.dataset.eligible) || 0;
    const target = parseInt(progress.dataset.target) || 0;
    const total = parseInt(progress.dataset.total) || 50;
console.log("completed [" + completed + "] attempted [" + attempted + "] eligible [" + eligible + "] target [" + target + "] total [" + total + "]");
    // Crear el grid visual
    const grid = document.createElement('div');
    grid.classList.add('priority-grid');

    for (let i = 0; i < total; i++) {
      const box = document.createElement('div');
      box.classList.add('player-box');

      if (i < completed) {
        box.classList.add('complete');
      } else if (i < attempted) {
        box.classList.add('failed');
      } else if (i < eligible) {
        box.classList.add('not-played');
      } else {
        box.classList.add('not-eligible');
      }

      if (i < target) {
        box.classList.add('target-box');
      }
      grid.appendChild(box);
    }

    // Limpiar contenido previo (si lo hubiera) y añadir el grid
    progress.innerHTML = '';
    progress.appendChild(grid);
  });
</script>

</body>
</html>
